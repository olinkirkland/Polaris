<?xml version="1.0"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark"
                creationComplete="onCreationComplete(event)"
                autoDrawBackground="false"
                width="100%"
                height="100%">
    <fx:Script><![CDATA[
        import events.PayloadEvent;

        import global.Color;
        import global.Icons;
        import global.Utils;

        import logic.Save;

        import mx.events.FlexEvent;

        private var save:Save;

        private function onCreationComplete(event:FlexEvent):void
        {
        }

        override public function set data(value:Object):void
        {
            if (!value)
                return;

            enabled = true;

            save = Save(value);

            labelName.text = save.name;
            labelTime.text = Utils.formatTime(save.time);
        }

        private function onButtonDeleteClick(event:MouseEvent):void
        {
            enabled = false;
            dispatchEvent(new PayloadEvent(PayloadEvent.DELETE, save, true));
        }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="disabledAndSelected" />
        <s:State name="down" />
        <s:State name="downAndSelected" />
        <s:State name="over" />
        <s:State name="overAndSelected" />
        <s:State name="up" />
        <s:State name="upAndSelected" />
    </s:states>

    <s:HGroup width="100%"
              height="100%"
              gap="0"
              verticalAlign="middle">

        <s:Group width="100%">
            <s:Rect width="100%"
                    height="100%"
                    bottomLeftRadiusX="5"
                    bottomLeftRadiusY="5"
                    topLeftRadiusX="5"
                    topLeftRadiusY="5">
                <s:fill>
                    <s:SolidColor color="{Color.grey}" />
                </s:fill>
            </s:Rect>

            <s:VGroup padding="5"
                      paddingLeft="6"
                      paddingRight="6">
                <s:Label id="labelName"
                         fontWeight="bold"
                         textDecoration="none"
                         textDecoration.downAndSelected="underline"
                         textDecoration.overAndSelected="underline"
                         textDecoration.upAndSelected="underline" />
                <s:Label id="labelTime"
                         fontSize="10"
                         fontStyle="italic" />
            </s:VGroup>

            <s:Rect width="100%"
                    height="100%"
                    bottomLeftRadiusX="5"
                    bottomLeftRadiusY="5"
                    topLeftRadiusX="5"
                    topLeftRadiusY="5">
                <s:fill>
                    <s:SolidColor color="{Color.white}"
                                  alpha="0"
                                  alpha.up=".2" />
                </s:fill>
            </s:Rect>
        </s:Group>

        <s:Group height="100%">
            <s:Rect width="100%"
                    height="100%"
                    bottomRightRadiusX="5"
                    bottomRightRadiusY="5"
                    topRightRadiusX="5"
                    topRightRadiusY="5">
                <s:fill>
                    <s:SolidColor color="{Color.grey}"
                                  alpha=".3" />
                </s:fill>
            </s:Rect>

            <s:VGroup height="100%"
                      padding="5"
                      paddingLeft="6"
                      paddingRight="6"
                      verticalAlign="middle">
                <s:Button id="buttonDelete"
                          icon="{Icons.trash}"
                          skinClass="ui.skins.button.ButtonOnlyIconSkin"
                          click="onButtonDeleteClick(event)" />
            </s:VGroup>
        </s:Group>

    </s:HGroup>

</s:ItemRenderer>